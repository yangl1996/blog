---
date: "2016-08-27T05:01:00Z"
title: 迁移 Time Machine 备份
---

我定期用 Time Machine 把整个 Mac 备份到一个 320GB 的硬盘上。用了几年后这个硬盘终于满了，而且原来的 USB 2.0 实在慢了点，所以买了个 WD 的 2TB 硬盘用于备份。

苹果的支持页面其实给了迁移 Time Machine 备份的方法，大致就是先停用 Time Machine，把新硬盘格式化好，不要忽略硬盘上的读写权限，最后把 Backups.backupdb 拷贝过去就行。

前几步都非常顺畅，但是在拷贝 Backups.backupdb 的时候遇到问题。可能是因为里面的文件太多，Finder 一直卡在“正在准备拷贝xxx个文件”，慢得令人难以置信。Finder 统计出来的文件数增长的也很慢，过了一个小时也才 20000 左右。此时查看活动监视器可以发现，磁盘 IO 完全是 0。照这么下去，要等到它真正开始拷贝，可能需要好几天的时间。

解决方法是利用磁盘工具里的“恢复”功能，以原来的备份分区为源，恢复到新的备份分区。拷贝过程会马上开始。估计“恢复”是直接用 `dd` 之类的工具直接映像到新的分区上，绕过了文件系统部分。

文件转移完毕后，只要在 Time Machine 偏好设置中移除原来的备份磁盘，换上新的就行。在新磁盘进行第一次备份后，所有历史备份也都会出现。